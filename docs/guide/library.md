# 词库管理 (Library)

MagicWord 提供了灵活的词库管理功能，支持本地创建、在线下载以及多种导入方式。

## 1. 词库管理界面

点击主界面左上角的菜单图标，或者点击当前词库名称，即可进入 **Library Manager** 界面。该界面分为两个标签页：

### 本地词库 (Local)
管理您设备上已有的所有词库。
*   **切换**: 点击列表项即可切换当前活动词库。
*   **创建**: 点击右下角 `+` 按钮创建新词库。
*   **操作**:
    *   **重命名**: 长按 -> 重命名。
    *   **删除**: 长按 -> 删除（**警告**: 默认词库不可删除）。
    *   **上传**: 勾选词库 -> 点击右上角云上传图标 -> 将您的词库分享给全球用户。

### 在线词库 (Online)
浏览和下载社区分享的词库。
*   **浏览**: 列表显示最新的在线词库，包含名称、描述、作者和标签。
*   **搜索**: 顶部搜索框支持按名称/描述搜索。
*   **筛选**: 左侧标签栏支持按 Tag (如 `CET4`, `TOEFL`) 筛选。
*   **下载**: 点击下载图标，自动导入到本地。

## 2. 导入与导出

### 批量导入 (Bulk Import)
在 **WordsScreen**（列表模式）下：
1.  点击右上角 **列表图标** 切换视图。
2.  点击右下角 **导入按钮**。
3.  输入单词列表（支持换行或逗号分隔）。
4.  点击 **开始导入**。
    *   系统会自动调用 AI 批量生成释义。
    *   支持后台运行，您可以继续使用 App 其他功能。

### JSON 导入/导出
MagicWord 使用标准化的 JSON 格式，方便迁移和备份。

**导出**:
*   在本地词库列表中长按 -> 导出。
*   文件将保存到手机的 `Android/data/com.magicword.app/files/` 目录下。

**导入**:
*   支持导入标准格式的 JSON 文件。
*   支持导入旧版本的单词列表备份。

## 3. 在线词库生态 (GitHub Warehouse)

MagicWord 的在线词库系统基于 GitHub 仓库构建，实现了“仓库即数据库”的理念。

### 自动索引
当您上传词库时：
1.  App 将数据发送给 Cloudflare Worker。
2.  Worker 将文件提交到 `magicwordfile` 仓库。
3.  GitHub Actions 自动运行，更新索引文件 (`index.json`) 和标签统计 (`tags.json`)。
4.  约 1-5 分钟后，您的词库即可在所有用户的“在线词库”列表中看到。

### 数据结构
每个在线词库包含两个文件：
*   `info.json`: 元数据（名称、描述、标签）。
*   `library.json`: 实际单词数据（Base64 编码）。

这种设计确保了数据的透明性和永久存储，不依赖任何私有数据库服务。
